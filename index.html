<!DOCTYPE html>
<html>
<body>

<div>
    <button id="myButton">Click Me!</button>
</div>

</body>

<script>
    let myId = null;
 
    function sendMsg(obj) {
        window.parent.postMessage(JSON.stringify(obj), "*");
    }
 
    function receiveMsg(event) {
        try {
            const data = JSON.parse(event.data);
 
            if(data.type === "handshake"){
                myId = data.id;
                console.log("Received handshake, id:", myId);
            }
        } catch (e) {
            console.error("Error parsing message:", e);
        }
    }
 
    window.addEventListener("message", receiveMsg, false);
 
    document.getElementById("myButton").addEventListener("click", function() {
        const message = {
            type: "reload",
            id: myId
        };
        console.log("Sending message:", message);
        sendMsg(message);
    });
</script>


</html>
